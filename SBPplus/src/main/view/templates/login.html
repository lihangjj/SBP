<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" style="overflow-x:hidden">
<head th:include="plugins/include_javascript::js">
</head>

<body style="overflow-x:hidden" id="body">
<div class="container-fluid" style="text-align: center;">
    <!--导航条-->
    <div class="row" style="text-align: center;" id="nav">
        <div class="visible-xs col-xs-1 col-xs-push-10 dropdown" style="position: fixed;top: 20px;z-index: 2;">
            <img th:src="@{/images/index/liebiao.png}" class="dropdown-toggle" data-toggle="dropdown"
                 style="width: 25px;" id="liebiao"/>
            <ul class="dropdown-menu" style="background: black;">
                <li>
                    <nobr><a href="/">首页</a></nobr>
                </li>
                <li>
                    <nobr><a href="http://www.baidu.com">服务</a></nobr>
                </li>
                <li>
                    <nobr><a>关于</a></nobr>
                </li>
                <li>
                    <nobr><a>登陆</a></nobr>
                </li>
                <li>
                    <nobr><a>注册</a></nobr>
                </li>
            </ul>
        </div>
        <!--导航条-->
        <div class="col-xs-3 col-xs-push-9 hidden-xs " style="position: fixed;top: 20px;z-index: 2;">
            <div class="col-xs-12">
                <div class="col-xs-2">
                    <nobr><a href="/">首页</a></nobr>
                </div>
                <div class="col-xs-2">
                    <nobr><a>服务</a></nobr>
                </div>
                <div class="col-xs-2">
                    <nobr><a>关于</a></nobr>
                </div>
                <div class="col-xs-2">
                    <nobr><a th:href="@{/loginUrl}">登陆</a></nobr>
                </div>
                <div class="col-xs-2">
                    <nobr><a>注册</a></nobr>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-xs-12" th:style="'background-image: url('+@{/images/login/b1.jpeg}+');background-size: cover'">
            <div id="imgHeight">
                <div class="col-md-6 col-md-push-5"
                     style="margin: auto;position: relative;top: 50%;transform: translateY(-50%)">
                    <form id="loginForm" th:action="@{/pages/login}" style="text-align: left">
                        <div class="form-group form-inline">
                            <input type="text" class="form-control"  name="memberid" id="memberid"
                                   placeholder="用户名"
                                   style="background: none;border:none;color: white "/><span style="color: red"
                                                                                             th:text="${msg}"></span>
                        </div>
                        <div class="form-group form-inline">
                            <input type="password" class="form-control" name="password" id="password"
                                   placeholder="密码"
                                   style="background: none;border:none;color: white;"/>
                        </div>

                        <div th:if="${showCode==true}" class="form-group form-inline">
                            <input type="text" class="form-control" name="code" id="code"
                                   placeholder="验证码" style="background: none;border:none;color: white;"/>
                            <img th:src="@{/defaultKaptcha}" style="border-radius: 5px" id="rand" name="rand"
                                 alt="验证码"/>
                        </div>

                        <div class="form-group form-inline" style="visibility: hidden;vertical-align: middle"
                             id="login">
                            <span style="color: white;top: 10px;position: relative"><input type="checkbox"
                                                                                           name="rememberPwd" value="yes"/>记住密码</span>
                            <input type="submit" style="margin-top: 20px;display: inline-block"
                                   class="form-control btn btn-danger" value="登陆"/>
                        </div>

                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
</body>
<script type="text/javascript" th:src="@{/js/qlm.js}"></script>
<link rel="stylesheet" type="text/css" th:href="@{/css/qlm.css}"/>
<script type="text/javascript">
    window.onload = function () {
        $("#imgHeight").css({
            height: window.innerHeight //先获得设备的高度，然后这样适配屏幕
        });

        $("#memberid").on("focus", function () {
            $("#login").css({
                visibility: "visible"
            })
        });
        $("#loginForm").validate({
            debug: true, // 取消表单的提交操作
            submitHandler: function (form) {
                form.submit(); // 提交表单
            },
            errorPlacement: function (error, element) {
                $("#" + $(element).attr("id") + "Msg").append(error);
            },
            highlight: function (element, errorClass) {
                $(element).fadeOut(1, function () {
                    $(element).fadeIn(1, function () {
                        $(element).css({
                            "box-shadow": "0 0 10px rgba(255,0,0,1)"
                        })
                    });

                })
            },
            unhighlight: function (element, errorClass) {
                $(element).fadeOut(1, function () {
                    $(element).fadeIn(1, function () {
                        $(element).css({
                            "box-shadow": "0 0 10px rgba(0,255,0,1)"
                        });
                    });
                })
            },
            errorClass: "text-danger",
            messages: {
                claim: "请输入项目需求",
                phone: "请输入正确的手机号",
                code: "验证码错误"

            },
            rules: {
                mid: {
                    required: true
                },
                password: {
                    required: true
                },
                code: {
                    required: true,
                    rangelength: [4, 4],
                    remote: {
                        url: "/checkRandAndCode", // 后台处理程序
                        type: "post", // 数据发送方式
                        dataType: "json", // 接受数据格式
                        data: { // 要传递的数据
                            code: function () {
                                return $("#code").val();
                            }
                        },
                        dataFilter: function (data) {
                            return data;
                        }
                    }
                }
            }
        });

    };
    window.onresize = function () {
        $("#imgHeight").css({
            height: window.innerHeight //先获得设备的高度，然后这样适配屏幕
        });
    }
</script>

</html>
